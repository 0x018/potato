<div class="row">
  <div class="col line">
    <button class="select" on:click="{open}">常用布局</button>
  </div>
  <div class="col line grid-edit">
    <!-- 布局处理 -->
    <div class="line-500px">
      <gform next="{(e)=>{ gridEdit.rows=e.rows;gridEdit.columns=e.columns; }}"
        gtr="{gridEdit.rows}" width="{gridEdit.width}" height="{gridEdit.height}" gtc="{gridEdit.columns}"></gform>
        <label class="scale">
          <span>预览比例:{scale}</span>
          <input type=range bind:value={scale} min=0.2 step=0.1 max=2>
        </label>
        <div class="clear"></div>
    </div>
    <div class="line-fr">
      <!-- scale="{gridEdit.scale}" -->
      <div class="span-box" style="{scaleCalc(scale)}">
        <grid gtr="{gridEdit.rows}" width="{gridEdit.width}" height="{gridEdit.height}" gtc="{gridEdit.columns}"
          count="{gridEdit.count}" span="{gridEdit.span}"  mode="{'span-edit'}" scale="{scale}">
        </grid>
      </div>
      <div class="clear"></div>
    </div>
    <div class="clear"></div>
  </div>
  <div class="col line">
    <!-- 组件选择 -->
    <div class="clear"></div>
  </div>
  <div class="col line">
    <input class="next" type="button" value="下一步" on:click={()=>{step=3}}>
    <div class="clear"></div>
  </div>
  <div class="clear"></div>
</div>

<modal show="{show}" let:data={md} let:set={sd}>
  <p class="title">布局选择</p>
  <!-- <p class="title">{JSON.stringify(md)}</p> -->
  <div class="list">
    {#each layoutArr as item,index}
    <div class="box" class:active="{ (md?.active == index) }" on:click="{()=>{ sd({active:index,data:item})} }">
      <div class="cut">
        <div class="select-box" style="{scaleCalc(item.scale)}">
          <grid gtr="{item.rows}" width="{item.width}" height="{item.height}" gtc="{item.columns}"
          count="{item.count}" span="{item.span}" scale="{item.scale}"></grid>
        </div>
      </div>
      <div class="desc">
        {@html item.desc}
      </div>
    </div>
    {/each}
  </div>
  <button class="modal-btn" disabled="{!md}" on:click="{()=>{selectLayout(md.data||{});}}">确定</button>
  <div class="clear"></div>
</modal>